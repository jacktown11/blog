<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/article.css">
	<link rel="stylesheet" href="/css/monokai.css">
</head>

<body>
	<div id="app">

		<!-- 文章目录 -->
		<div id="catalog-container" class="catalog-container">
			<p class="level-controller">
				展开级别：
				<button @click="modifyLevel(-1)" class="level-btn level-minus">-</button>
				<span class="level-now" v-html="expandLevel"></span>
				<button @click="modifyLevel(1)" class="level-btn level-add">+</button>
			</p>
			<blog-catalog class="catalogs" :tree-node="tree" :expand-level="expandLevel"></blog-catalog>
		</div>

		<!-- 更多文章导航 -->
		<div class="post-nav">
			<div class="home">
				<a class="home-link" href="/">返回首页</a>
			</div>
			<div class="prev no-wrap">
				上一篇：<a href="/blog/2018/12/30/typescript-learn-note">typescript学习笔记</a>
			</div>
			<div class="next no-wrap">
				下一篇：没有更多了
			</div>
		</div>

		<!-- 文章内容区 -->
		<div class="article-wrap">
			<article id="article-container">
				<h1 id="post-title">《JavaScript 高级程序设计》（第3版）笔记</h1>
				<p class="meta">2019-01-03</p>
				<div class="post" ref="post">
					<h1 id="第1章-javascript简介">第1章 JavaScript简介</h1>

<p>JavaScript 于1995年由当时就职于 Netscape 公司的 Brendan Eich 开发，最初是为了通过提供前端表单校验，在当时普遍低网速的情况下极大提升用户体验。</p>

<p>JavaScript 包括三部分：</p>

<ul>
  <li>核心( ECMAScript )
    <ul>
      <li>其标准是<a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm"> ECMA-262 </a>，由 ECMA (欧洲计算机制造商协会)下的 TC39 技术委员会制定</li>
      <li>2009年发布了第5版，2015年发布第6版（ ES2015 ），之后每年都会有版本更新，直接有年份表示版本（如 ES2018 ）</li>
    </ul>
  </li>
  <li>文档对象模型( DOM )
    <ul>
      <li>定义访问与操作网页内容的方法与接口</li>
      <li>DOM1 ，1998年10月成为 W3C 推荐标准，包括 DOM Core 和 DOM HTML ，主要映射文档结构</li>
      <li>DOM2 ，给出很多新模块：DOM视图、DOM事件、DOM样式、DOM遍历和范围</li>
      <li>DOM3 ，引入了DOM加载与保持模块、DOM验证模块、开始支持 XML1.0 规范</li>
      <li>其他DOM标准： SVG 、 MathMl 、 SMIL</li>
      <li>IE6~8 支持 DOM1 （几乎全部），IE9+ 支持 DOM1~3</li>
    </ul>
  </li>
  <li>浏览器对象模型( BOM )
    <ul>
      <li>提供与浏览器交互的方法和接口</li>
      <li>HTML5 之前没有正式规范，但有如 window 对象、 navigator 对象等事实标准</li>
    </ul>
  </li>
</ul>

<p>JavaScript 的版本通常以 ECMAScript 的版本为准，只有 Mozilla 公司还在沿用原来的 JavaScript 的版本序号。</p>

<h1 id="第2章-在html中使用javascript">第2章 在HTML中使用JavaScript</h1>

<ul>
  <li>使用 script 标签在 html 页面中插入脚本，通常认为使用 <code class="highlighter-rouge">src</code> 属性指定外部脚本要优于嵌入代码，因为具有可维护性和可缓存的优点</li>
  <li>利用 <code class="highlighter-rouge">src</code> 属性加载外部文件不受浏览器同源策略的限制，这也是 jsonp 跨域的基础。</li>
  <li>默认情况下，页面都是从上往下加载和执行，因此通常将 <code class="highlighter-rouge">js</code> 脚本放在页面最后以避免其阻塞页面加载；但是 <code class="highlighter-rouge">defer</code> 和 <code class="highlighter-rouge">async</code> 属性（仅外部文件可用）也可以改变其默认行为：
    <ul>
      <li><code class="highlighter-rouge">defer</code> 让浏览器立即加载，延迟执行（遇到<code class="highlighter-rouge">&lt;/html&gt;</code>后）</li>
      <li><code class="highlighter-rouge">async</code> 让浏览器异步地加载和执行</li>
      <li>使用这两个属性时，代码的执行顺序通常是不确定的，因此一定要确认文件间的依赖不会因此破坏</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">type</code> 属性默认是 <code class="highlighter-rouge">text/javascript</code> ，通常省略</li>
</ul>

<h1 id="第3章-基本概念">第3章 基本概念</h1>

<p>本章介绍了 javascript 中的语法、关键字和保留字、变量、数据类型、操作符、语句、函数等，下面是部分要点总结。</p>

<h2 id="typeof-操作符">typeof 操作符</h2>

<p><code class="highlighter-rouge">typeof &lt;操作数&gt;</code>，总是返回一个字符串。</p>

<table>
  <thead>
    <tr>
      <th>操作数类型</th>
      <th>返回字符串</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Undefined</td>
      <td>‘undefined’</td>
    </tr>
    <tr>
      <td>Boolean</td>
      <td>‘boolean’</td>
    </tr>
    <tr>
      <td>Number</td>
      <td>‘number’</td>
    </tr>
    <tr>
      <td>String</td>
      <td>‘string’</td>
    </tr>
    <tr>
      <td>Null</td>
      <td>‘object’</td>
    </tr>
    <tr>
      <td>Obejct</td>
      <td>‘object’</td>
    </tr>
    <tr>
      <td>Function</td>
      <td>‘function’</td>
    </tr>
  </tbody>
</table>

<h2 id="undefined-和-null">undefined 和 null</h2>

<ul>
  <li>如果一个变量声明时未初始化，其值为 undefined</li>
  <li>对包含 undefined 值的变量和未定义的变量，使用 typeof 操作符，结果都是 undefined</li>
  <li><code class="highlighter-rouge">null == undefined</code> 的结果是 true</li>
  <li>undefined 表示缺少值（应该有值，但未定义，如未初始化的变量、未传入值的函数参数、无返回语句的函数返回值等），没必要显式的将一个变量赋值为 undefined</li>
  <li>null 表示空对象（比如 Object 对象的原型就是 null），可以显式地用来表示空对象指针</li>
  <li><a href="http://www.ruanyifeng.com/blog/2014/03/undefined-vs-null.html">undefined与null的区别</a></li>
</ul>

<h2 id="六个falsy值">六个falsy值</h2>

<p>有六个值强制转换为 Boolean 类型时结果是 false: <code class="highlighter-rouge">false</code> 、 <code class="highlighter-rouge">0</code> 、 <code class="highlighter-rouge">NaN</code> 、 <code class="highlighter-rouge">''</code> 、 <code class="highlighter-rouge">undefined</code> 、 <code class="highlighter-rouge">null</code>。</p>

<h2 id="类型转换">类型转换</h2>

<h3 id="转为布尔值">转为布尔值</h3>

<ul>
  <li><code class="highlighter-rouge">Boolean()</code></li>
  <li><code class="highlighter-rouge">!</code> 或 <code class="highlighter-rouge">!!</code></li>
</ul>

<h3 id="转为数值">转为数值</h3>

<ul>
  <li>通用转换方式： Number() 或一元加操作符 <code class="highlighter-rouge">+</code>，可以将任何类型转为数值
    <ul>
      <li>用于字符串时格式要求严格，如果确定字符串是严格的数字格式（可以有正负号和小数点，但是没有空格及其他非数字字符），这种方式比较简单</li>
    </ul>
  </li>
  <li>字符串转换： parseInt() 和 parseFloat()，相对通用方式更智能
    <ul>
      <li>parseInt()，字符串中可以有前导的空格，后面也可以有非数字字符；支持第二个可选参数转换的进制基数，如2、8、10、16等，建议始终使用，否则默认判断的进制可能不是想要的</li>
      <li>parseFloat()，只支持十进制</li>
    </ul>
  </li>
</ul>

<h3 id="转为字符串">转为字符串</h3>

<ul>
  <li><code class="highlighter-rouge">toString()</code> 方法，除了 null 和 undefined可用</li>
  <li><code class="highlighter-rouge">String()</code> 函数，通用，非 null 和 undefined 值实际会调用相应的 toString() 方法</li>
  <li>加法，<code class="highlighter-rouge">'' + 被转换者</code>，将一个值和空字符串相加，会自动调用 toString() 方法或 String()函数</li>
</ul>

<h3 id="逻辑与逻辑或">逻辑与、逻辑或</h3>

<ul>
  <li>逻辑与操作符<code class="highlighter-rouge">&amp;&amp;</code>规则：
    <ul>
      <li>第一个操作数如果是falsy的值，就返回第一个操作数</li>
      <li>否则返回第二个操作数</li>
    </ul>
  </li>
  <li>逻辑或操作符<code class="highlighter-rouge">||</code>规则：
    <ul>
      <li>第一个操作数如果是falsy的值，就返回第二个操作数</li>
      <li>否则返回第一个操作数</li>
    </ul>
  </li>
</ul>

<p>以上规则表明，这两个操作符的返回结果不一定是布尔类型。</p>

<h3>==、===</h3>

<ul>
  <li>相等操作符 <code class="highlighter-rouge">==</code> 会遵循一套比较复杂的规则进行类型转换以后再比较，比如 <code class="highlighter-rouge">undefined == null</code> 结果是 true</li>
  <li>全等操作符 <code class="highlighter-rouge">===</code> 不会进行类型转换，也就是说只要类型不同就一定不会相等，推荐始终使用全等操作符</li>
</ul>

<h1 id="第4章-变量作用域和内存问题">第4章 变量、作用域和内存问题</h1>

<ul>
  <li>javascript 中五种基本类型是 Null, Undefined, Boolean, Number, String，它们占用固定大小的空间，被保存在栈内存中</li>
  <li>引用类型都继承 Object，它们保存在堆内存中</li>
  <li>javascript 中函数传参始终是按值传递</li>
  <li><strong>执行环境</strong>定义了变量和函数能够访问的其他数据及其自身的行为</li>
  <li>每个执行环境中有一个<strong>变量对象</strong>包含当前环境可访问的变量与函数；函数的执行环境的变量对象就是它的活动对象</li>
  <li>各执行环境的变量对象的嵌套构成了<strong>作用域链</strong>，其最前端是当前执行环境的变量对象，全局执行环境的变量对象则是最后一个对象</li>
  <li>标识符按照作用域链进行查找，通常执行环境只有两种：全局和局部（函数），有两种情况会延长作用域链： with 语句和 try-catch 语句中的 catch 块</li>
  <li>javascript 中有自动垃圾收集机制：标记清除与引用计数</li>
  <li>标记清除是主流算法，引用计数在循环引用情况下会导致内存泄漏，如 IE9 之前的非原生 javascript 对象都是是采用引用计数算法来清除的</li>
  <li>不使用的全局变量及时解引用，有助于消除循环引用、进行有效的垃圾回收</li>
</ul>

<h1 id="第5章-引用类型">第5章 引用类型</h1>

<h2 id="数组">数组</h2>

<h3 id="类型检测">类型检测</h3>

<p>instanceof 操作符在非单一执行环境（如有框架）下可能有问题，Array.isArray() 方法需要较高版本浏览器（IE9+等），兼容低版本浏览器的通用方法：</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">isArray</span><span class="p">(</span><span class="nx">arr</span><span class="p">){</span>
  <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">===</span> <span class="s1">'[object Array]'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="修改方法">修改方法</h3>

<p>以下的这些’修改方法’都会直接在原数组上操作。</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span> <span class="c1">// arr: [1, 2] </span>
<span class="nx">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// arr: [0, 2] </span>
<span class="nx">arr</span><span class="p">[</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// arr: [0, 2, 3] </span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span> <span class="c1">// arr: [0, 2, 3, 1, 5](返回新数组长度) </span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span> <span class="c1">// arr: [0, 2, 3, 1](返回弹出的元素) </span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span> <span class="c1">// arr: [2, 3, 1](返回弹出的元素) </span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span> <span class="c1">// arr: [7, 2, 3, 1](返回新数组长度) </span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span> <span class="c1">// arr: [1, 3, 2, 7] </span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span> <span class="p">});</span> <span class="c1">// arr: [1, 2, 3, 7] </span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="c1">// arr: [1, 3, 4, 7]</span>
</code></pre>
</div>

<h3 id="生产方法">生产方法</h3>

<p>以下这些’生产方法’基本不会直接操作原数组，而是使用原数组作为材料，返回一个新数组或者原数组的相关信息。</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">'_'</span><span class="p">));</span> <span class="c1">// 1_2_3_4_3_5</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">concat</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]));</span> <span class="c1">// [1, 2, 3, 4, 3, 5, 6, 7]</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span> <span class="c1">// [2, 3, 4, 3, 5]</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span> <span class="c1">// [2, 3, 4, 3]</span>

<span class="c1">// 后面这些方法需要高版本浏览器（IE9+等）。</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">item</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">;</span> <span class="p">}));</span> <span class="c1">//[4, 5]</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">item</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}));</span> <span class="c1">// [2, 4, 6, 8, 6, 10]</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">item</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}));</span> <span class="c1">// false</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">item</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}));</span> <span class="c1">// true</span>
<span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span> <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">item</span><span class="p">;</span> <span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sum</span><span class="p">);</span> <span class="c1">// 18 </span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">cur</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">prev</span> <span class="o">+</span> <span class="nx">cur</span><span class="p">;</span> <span class="p">},</span> <span class="mi">0</span><span class="p">));</span> <span class="c1">// 18</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">reduceRight</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">cur</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">prev</span> <span class="o">+</span> <span class="nx">cur</span><span class="p">;</span> <span class="p">}));</span> <span class="c1">// 18</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span> <span class="c1">// 4</span>
<span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="c1">// 4</span>
</code></pre>
</div>

<h2 id="date">Date</h2>

<h3 id="日期创建">日期创建</h3>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// 基于当前时间创建的日期</span>
<span class="kd">var</span> <span class="nx">d1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="c1">// 指定相对于UTC1970-01-01 00:00:00过去的毫秒数来创建日期</span>
<span class="kd">var</span> <span class="nx">d2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="c1">// 指定日期参数的方式来创建日期（月份以0开始，基于本地系统时区，年和月是必须的，后面的参数可选）</span>
<span class="kd">var</span> <span class="nx">d3</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">35</span><span class="p">);</span>
</code></pre>
</div>

<h3 id="日期转毫秒数值">日期转毫秒数值</h3>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">t1</span> <span class="o">=</span> <span class="nx">d1</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">t2</span> <span class="o">=</span> <span class="o">+</span><span class="nx">d1</span><span class="p">;</span>
<span class="c1">// 获取当期时间毫秒值，IE9+等</span>
<span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
<span class="c1">// 日期的 valueOf 方法默认返回的是毫秒值而非字符串，故可以直接比较大小</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">d1</span> <span class="o">&lt;</span> <span class="nx">d2</span><span class="p">);</span> <span class="c1">// false</span>
</code></pre>
</div>

<h3 id="日期字符串的解析与生成">日期字符串的解析与生成</h3>


				</div>
				<p>（本文完）</p>
			</article>
		</div>

	</div>

	<script src="https://cdn.bootcss.com/vue/2.5.21/vue.min.js"></script>
	<script src="/js/article.js"></script>
</body>

</html>